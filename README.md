По сути, твоя матрица -- это карта высот какой-то произвольной поверхности.

Соответственно, для того, чтобы посчитать занимаемый жидкостью объем, нам нужно:
1. Получить сечение этой поверхности плоскостью, перпендикулярной оси z.
2. На этом сечении найти все замкнутые контуры вокруг пустого пространства, которые не соприкасаются с границами (за границы наша вода просто выльется).
3. Посчитать площадь внутри этих контуров. В данном случае это просто кол-во ячеек матрицы.
4. Проинтегрировать всё это по оси z. В данном случае просто сумма площадей для каждого сечения.
